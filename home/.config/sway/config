#### Sway configuration ####

### Startup programs ###
## Bar ##
#bar {
    #swaybar_command waybar
#}
## Once at startup ##
# Lock screen (and transparency, only after unlocked)
exec 'lockscreen -i; killall -9 swayinactives; sleep 1 && swayinactives'

# wallpaper
exec_always ~/.config/sway/swaybg.sh

# flashfocus
exec 'killall flashfocus; flashfocus'

### Keyboard layout
input "6940:6985:Corsair_CORSAIR_K70_RGB_MK.2_Mechanical_Gaming_Keyboard" {
    xkb_layout br
}
input "6940:6985:ckb1:_CORSAIR_K70_RGB_MK.2_Mechanical_Gaming_Keyboard_vKB" {
    xkb_layout br
}

### Appearance ###
## Colors ##
# Start flavours
## Base16 Pasque
# Author: Gabriel Fontes (https://github.com/Misterio77)

set $base00 #271C3A
set $base01 #100323
set $base02 #3E2D5C
set $base03 #5D5766
set $base04 #BEBCBF
set $base05 #DEDCDF
set $base06 #EDEAEF
set $base07 #BBAADD
set $base08 #A92258
set $base09 #918889
set $base0A #804ead
set $base0B #C6914B
set $base0C #7263AA
set $base0D #8E7DC6
set $base0E #953B9D
set $base0F #59325C
# End flavours
client.focused           $base02 $base00 $base05 $base02 $base03
client.unfocused         $base00 $base00 $base04 $base00 $base00
client.focused_inactive  $base00 $base00 $base04 $base00 $base00

## Font ##
font pango:Fira Sans Regular 12

# Gaps
gaps horizontal 20
gaps inner 40

# Border
default_border pixel 0
for_window [class=".*"] border pixel 0

# Rounded borders
border_images.focused ~/.config/sway/border.png
border_images.focused_inactive ~/.config/sway/border.png
border_images.unfocused ~/.config/sway/border.png
border_images.urgent ~/.config/sway/border.png

### Keybinds ###

## Keys definition ##
# Modifier keys
set $mod Mod4
set $alt Mod1

# Vim direction keys
set $left   h
set $down   j
set $up     k
set $right  l

# Profile key
set $profile XF86Tools
# Light key
set $light XF86Launch6
# Lock key
set $lock XF86Launch5

## Window manager keys ##
# Close containers
bindsym $alt+F4      kill
bindsym $mod+Shift+q kill

# Key for dragging floating windows around
floating_modifier $mod

# Focus containers
bindsym $mod+$left  focus left
bindsym $mod+Left  focus left

bindsym $mod+$down  focus down
bindsym $mod+Down  focus down

bindsym $mod+$up    focus up
bindsym $mod+Up    focus up

bindsym $mod+$right focus right
bindsym $mod+Right focus right

# Move containers
bindsym $mod+Shift+$left  move left
bindsym $mod+Shift+Left  move left

bindsym $mod+Shift+$down  move down
bindsym $mod+Shift+Down  move down

bindsym $mod+Shift+$up    move up
bindsym $mod+Shift+Up    move up

bindsym $mod+Shift+$right move right
bindsym $mod+Shift+Right move right

# Split orientation
bindsym $mod+minus     split v
bindsym $mod+backslash split h

# Fullscreen focused container
bindsym $mod+f fullscreen toggle

# Change container layout (stacked, tabbed, toggle split)
bindsym $mod+Shift+t layout tabbed
bindsym $mod+Shift+s layout stacked
bindsym $mod+Shift+e layout toggle split
# Toggle tiling / floating
bindsym $mod+Shift+space floating toggle

# Change focus between floating and tilled
bindsym $mod+space focus mode_toggle

# Focus the parent container
bindsym $mod+p focus parent
bindsym $mod+a focus parent

# Move entire workspace to another monitor
bindsym $mod+$alt+$left move workspace to output left
bindsym $mod+$alt+$right move workspace to output right
bindsym $mod+$alt+Left move workspace to output left
bindsym $mod+$alt+Right move workspace to output right

# Scratchpad
bindsym $mod+u       scratchpad show
bindsym $mod+Shift+u move scratchpad

# Switch workspace
bindsym $mod+1 workspace 1
bindsym $mod+2 workspace 2
bindsym $mod+3 workspace 3
bindsym $mod+4 workspace 4
bindsym $mod+5 workspace 5
bindsym $mod+6 workspace 6
bindsym $mod+7 workspace 7
bindsym $mod+8 workspace 8
bindsym $mod+9 workspace 9
bindsym $mod+0 workspace 10

# Move focused container to workspace
bindsym $mod+Shift+1 move container to workspace 1
bindsym $mod+Shift+2 move container to workspace 2
bindsym $mod+Shift+3 move container to workspace 3
bindsym $mod+Shift+4 move container to workspace 4
bindsym $mod+Shift+5 move container to workspace 5
bindsym $mod+Shift+6 move container to workspace 6
bindsym $mod+Shift+7 move container to workspace 7
bindsym $mod+Shift+8 move container to workspace 8
bindsym $mod+Shift+9 move container to workspace 9
bindsym $mod+Shift+0 move container to workspace 10

# Reload sway
bindsym $mod+Shift+r exec swaymsg reload
# Exit sway
bindsym $mod+Shift+x exec zenity --question --text="Do you really want to exit?" --no-wrap --icon-name=exit && swaymsg exit

# Resize mode
mode "resize" {
        # Resize windows
        bindsym $right resize shrink width 30 px or 10 ppt
        bindsym $down resize grow height 30 px or 10 ppt
        bindsym $up resize shrink height 30 px or 10 ppt
        bindsym $left resize grow width 30 px or 10 ppt

        # Move windows
        bindsym Shift+$right move right 30
        bindsym Shift+$down  move down 30
        bindsym Shift+$up    move up 30
        bindsym Shift+$left  move left 30

        bindsym Return mode "default"
        bindsym Escape mode "default"
}
bindsym $mod+r mode "resize"

## Media and volume ##
# Volume
bindsym XF86AudioRaiseVolume exec pulseaudio-ctl up
bindsym XF86AudioLowerVolume exec pulseaudio-ctl down
bindsym XF86AudioMute exec pulseaudio-ctl mute
bindsym XF86AudioMicMute exec pulseaudio-ctl mute-input

# Media player controls
bindsym XF86AudioPlay exec mpris-ctl pp
bindsym XF86AudioNext exec mpris-ctl next
bindsym XF86AudioPrev exec mpris-ctl prev

## Services keybinds ##
# Lock the screen
bindsym $lock exec lockscreen

# Start screencast
bindsym $mod+s exec systemctl --user is-active screencast --quiet && systemctl --user stop screencast || systemctl --user start screencast

# Change color scheme (flavours)
bindsym $profile       exec flavours apply
# Change wallpaper (also updates schme if current is generated)
bindsym Shift+$profile exec setwallpaper -R
# Toggle dark/light mode
bindsym $light exec darkmode

# Get bitwarden password (or other item)
bindsym Scroll_Lock         exec bwpass | wl-copy
# Lock/unlock bitwarden vault
bindsym Shift+Scroll_Lock   exec [ -f /tmp/bwtoken ] && bwlock || bwunlock

## Launch app keys ##
# Open app menu
bindsym --release super_l exec wofi --show dmenu
bindsym --release super_r exec wofi --show dmenu

# Run dialog
bindsym $alt+F2   exec wofi --show run

# Launch terminal
bindsym $mod+t       exec alacritty
bindsym $mod+Return  exec alacritty
# Launch but on floating mode
bindsym $mod+Shift+Return exec alacritty & sleep 0.1 && swaymsg floating toggle

# Launch browser
bindsym $mod+b       exec qutebrowser

# Screenshot entire Screen
bindsym --release Print        exec grim - | wl-copy
# Screenshot selection
bindsym --release $mod+Print   exec grim -g "$(slurp)" - | wl-copy

### Window overrides ###

## Scratchpad (hidden stuff) ##
# Origin
for_window [instance="origin.exe"] move scratchpad
# Wine explorer
for_window [instance="explorer.exe"] move scratchpad

## Floating ##
# Zenity
for_window [app_id="zenity"] floating enable
# Steam
for_window [title="Friends List"] floating enable
for_window [title="Friends List"] [floating] resize set 300 600
