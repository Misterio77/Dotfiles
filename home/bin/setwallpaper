#!/bin/bash
# Query
if [[ $* == *-Q* ]]; then
    basename $(grep feh ~/.fehbg | tail -n 1 | cut -d \' -f 2)
    exit
fi

# List
if [[ $* == *-L* ]]; then
    ls -1R ~/Pictures/Wallpapers/ | grep -E ".png|.jpg|.jpeg"
    exit
fi

# Random
if [[ $* == *-R* ]]; then
    mapfile -t wallpapers < <(setwallpaper -L)
    rand=$(( $RANDOM % ${#wallpapers[@]}))
    wallpaper=~/Pictures/Wallpapers/${wallpapers[$rand]}
# Specified
else
    wallpaper=~/Pictures/Wallpapers/$1
fi


multilockscreen -u ${wallpaper} --span --fx > /dev/null &
if [[ $(flavours current) == "generated" ]]; then
    flavours generate $(lightdark) ${wallpaper} && flavours apply generated
fi
feh --bg-scale --no-xinerama ${wallpaper} &  \
